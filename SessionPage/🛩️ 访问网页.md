# ğŸ›©ï¸ è®¿é—®ç½‘é¡µ

SessionPage åŸºäº `requests` è¿›è¡Œç½‘ç»œè¿æ¥ï¼Œå› æ­¤å¯ä½¿ç”¨ `requests` å†…ç½®çš„æ‰€æœ‰è¯·æ±‚æ–¹å¼ï¼ŒåŒ…æ‹¬ `get()`ã€`post()`ã€`head()`ã€`options()`ã€`put()`ã€`patch()`ã€`delete()`ã€‚ä¸è¿‡æœ¬åº“ç›®å‰åªå¯¹ `get()` å’Œ `post()` åšäº†å°è£…å’Œä¼˜åŒ–ï¼Œå…¶ä½™æ–¹å¼å¯é€šè¿‡è°ƒç”¨é¡µé¢å¯¹è±¡å†…ç½®çš„ Session å¯¹è±¡ä½¿ç”¨ã€‚

## âœ…ï¸ get()

æ­¤æ–¹æ³•ç”¨äºä»¥ GET æ–¹å¼è¯·æ±‚é¡µé¢ã€‚

### ğŸ“Œ è®¿é—®åœ¨çº¿ç½‘é¡µ

`get()` æ–¹æ³•è¯­æ³•ä¸ `requests` çš„ `get()` æ–¹æ³•ä¸€è‡´ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†è¿æ¥å¤±è´¥é‡è¯•åŠŸèƒ½ã€‚ä¸ `requests` ä¸ä¸€æ ·çš„æ˜¯ï¼Œå®ƒä¸è¿”å› Response å¯¹è±¡ï¼Œè€Œæ˜¯ä» SessionPage å¯¹è±¡çš„ html ç­‰å±æ€§è¯»å–ç»“æœã€‚

| å‚æ•°åç§°       | ç±»å‹                | é»˜è®¤å€¼ | è¯´æ˜                                                                 |
|---------------|---------------------|--------|----------------------------------------------------------------------|
| url           | str                 | å¿…å¡«   | ç›®æ ‡ urlï¼Œå¯æŒ‡å‘æœ¬åœ°æ–‡ä»¶è·¯å¾„                                         |
| show_errmsg   | bool                | False  | è¿æ¥å‡ºé”™æ—¶æ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸                                         |
| retry         | int                 | None   | é‡è¯•æ¬¡æ•°ï¼Œä¸º None æ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 3                             |
| interval      | float               | None   | é‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸º None æ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 2                       |
| timeout       | float               | None   | åŠ è½½è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰                                                   |
| params        | dict                | None   | url è¯·æ±‚å‚æ•°                                                         |
| data          | dict/str            | None   | æºå¸¦çš„æ•°æ®                                                           |
| json          | dict/str            | None   | è¦å‘é€çš„ JSON æ•°æ®ï¼Œä¼šè‡ªåŠ¨è®¾ç½® Content-Type ä¸º 'application/json'   |
| headers       | dict                | None   | è¯·æ±‚å¤´                                                               |
| cookies       | dict/CookieJar      | None   | cookies ä¿¡æ¯                                                         |
| files         | Any                 | None   | è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯æ–‡ä»¶åï¼Œå€¼æ˜¯æ–‡ä»¶å¯¹è±¡æˆ–æ–‡ä»¶è·¯å¾„ |
| auth          | Any                 | None   | èº«ä»½è®¤è¯ä¿¡æ¯                                                         |
| allow_redirects | bool              | True   | æ˜¯å¦å…è®¸é‡å®šå‘                                                       |
| proxies       | dict                | None   | ä»£ç†ä¿¡æ¯                                                             |
| hooks         | Any                 | None   | å›è°ƒæ–¹æ³•                                                             |
| stream        | bool                | None   | æ˜¯å¦ä½¿ç”¨æµå¼ä¼ è¾“                                                     |
| verify        | bool/str            | None   | æ˜¯å¦éªŒè¯ SSL è¯ä¹¦                                                    |
| cert          | str/Tuple[str, str] | None   | SSL å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„(.pem æ ¼å¼)ï¼Œæˆ– ('cert', 'key') å…ƒç»„        |

**è¿”å›ç±»å‹**: bool - æ˜¯å¦è¿æ¥æˆåŠŸ

**è¯´æ˜**: `**kwargs` å‚æ•°ä¸ `requests` ä¸­è¯¥å‚æ•°ä½¿ç”¨æ–¹æ³•ä¸€è‡´ï¼Œä½†æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œå¦‚æœè¯¥å‚æ•°ä¸­è®¾ç½®äº†æŸä¸€é¡¹ï¼ˆå¦‚ `headers`ï¼‰ï¼Œè¯¥é¡¹ä¸­çš„æ¯ä¸ªé¡¹ä¼šè¦†ç›–ä»é…ç½®ä¸­è¯»å–çš„åŒåé¡¹ï¼Œè€Œä¸ä¼šæ•´ä¸ªè¦†ç›–ã€‚å°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³ç»§ç»­ä½¿ç”¨é…ç½®ä¸­çš„ `headers` ä¿¡æ¯ï¼Œè€Œåªæƒ³ä¿®æ”¹å…¶ä¸­ä¸€é¡¹ï¼Œåªéœ€è¦ä¼ å…¥è¯¥é¡¹çš„å€¼å³å¯ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–ä»£ç é€»è¾‘ã€‚ç¨‹åºä¼šæ ¹æ®è¦è®¿é—®çš„ç½‘å€è‡ªåŠ¨åœ¨ `headers` ä¸­åŠ å…¥ Host å’Œ Referer é¡¹ã€‚ç¨‹åºä¼šè‡ªåŠ¨ä»è¿”å›å†…å®¹ä¸­ç¡®å®šç¼–ç ï¼Œä¸€èˆ¬æƒ…å†µæ— éœ€æ‰‹åŠ¨è®¾ç½®ã€‚

**æ™®é€šè®¿é—®ç½‘é¡µ**ï¼š

```python
from DrissionPage import SessionPage

page = SessionPage()
page.get('http://g1879.gitee.io/drissionpage')
```

**ä½¿ç”¨è¿æ¥å‚æ•°è®¿é—®ç½‘é¡µ**ï¼š

```python
from DrissionPage import SessionPage

page = SessionPage()

url = 'https://www.baidu.com'
headers = {'referer': 'gitee.com'}
cookies = {'name': 'value'}
proxies = {'http': '127.0.0.1:1080', 'https': '127.0.0.1:1080'}
page.get(url, headers=headers, cookies=cookies, proxies=proxies)
```

### ğŸ“Œ è¯»å–æœ¬åœ°æ–‡ä»¶

`get()` çš„ `url` å‚æ•°å¯æŒ‡å‘æœ¬åœ°æ–‡ä»¶ï¼Œå®ç°æœ¬åœ° html è§£æã€‚

```python
from DrissionPage import SessionPage

page = SessionPage()
page.get(r'D:\demo.html')
```

## âœ…ï¸ post()

æ­¤æ–¹æ³•æ˜¯ç”¨ POST æ–¹å¼è¯·æ±‚é¡µé¢ã€‚ç”¨æ³•ä¸ `get()` ä¸€è‡´ã€‚

| å‚æ•°åç§°       | ç±»å‹                | é»˜è®¤å€¼ | è¯´æ˜                                                                 |
|---------------|---------------------|--------|----------------------------------------------------------------------|
| url           | str                 | å¿…å¡«   | ç›®æ ‡ urlï¼Œå¯æŒ‡å‘æœ¬åœ°æ–‡ä»¶è·¯å¾„                                         |
| show_errmsg   | bool                | False  | è¿æ¥å‡ºé”™æ—¶æ˜¯å¦æ˜¾ç¤ºå’ŒæŠ›å‡ºå¼‚å¸¸                                         |
| retry         | int                 | None   | é‡è¯•æ¬¡æ•°ï¼Œä¸º None æ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 3                             |
| interval      | float               | None   | é‡è¯•é—´éš”ï¼ˆç§’ï¼‰ï¼Œä¸º None æ—¶ä½¿ç”¨é¡µé¢å‚æ•°ï¼Œé»˜è®¤ 2                       |
| timeout       | float               | None   | åŠ è½½è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰                                                   |
| params        | dict                | None   | url è¯·æ±‚å‚æ•°                                                         |
| data          | dict/str            | None   | æºå¸¦çš„æ•°æ®                                                           |
| json          | dict/str            | None   | è¦å‘é€çš„ JSON æ•°æ®ï¼Œä¼šè‡ªåŠ¨è®¾ç½® Content-Type ä¸º 'application/json'   |
| headers       | dict                | None   | è¯·æ±‚å¤´                                                               |
| cookies       | dict/CookieJar      | None   | cookies ä¿¡æ¯                                                         |
| files         | Any                 | None   | è¦ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œå…¶ä¸­é”®æ˜¯æ–‡ä»¶åï¼Œå€¼æ˜¯æ–‡ä»¶å¯¹è±¡æˆ–æ–‡ä»¶è·¯å¾„ |
| auth          | Any                 | None   | èº«ä»½è®¤è¯ä¿¡æ¯                                                         |
| allow_redirects | bool              | True   | æ˜¯å¦å…è®¸é‡å®šå‘                                                       |
| proxies       | dict                | None   | ä»£ç†ä¿¡æ¯                                                             |
| hooks         | Any                 | None   | å›è°ƒæ–¹æ³•                                                             |
| stream        | bool                | None   | æ˜¯å¦ä½¿ç”¨æµå¼ä¼ è¾“                                                     |
| verify        | bool/str            | None   | æ˜¯å¦éªŒè¯ SSL è¯ä¹¦                                                    |
| cert          | str/Tuple[str, str] | None   | SSL å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„(.pem æ ¼å¼)ï¼Œæˆ– ('cert', 'key') å…ƒç»„        |

**è¿”å›ç±»å‹**: bool - æ˜¯å¦è¿æ¥æˆåŠŸ

```python
from DrissionPage import SessionPage

page = SessionPage()
data = {'username': '****', 'pwd': '****'}

page.post('http://example.com', data=data)
# æˆ–
page.post('http://example.com', json=data)
```

`data` å‚æ•°å’Œ `json` å‚æ•°éƒ½å¯æ¥æ”¶ `str` å’Œ `dict` æ ¼å¼æ•°æ®ï¼Œå³æœ‰ä»¥ä¸‹ 4 ç§ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼š

```python
# å‘ data å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²
page.post(url, data='abc=123')

# å‘ data å‚æ•°ä¼ å…¥å­—å…¸
page.post(url, data={'abc': '123'})

# å‘ json å‚æ•°ä¼ å…¥å­—ç¬¦ä¸²
page.post(url, json='abc=123')

# å‘ json å‚æ•°ä¼ å…¥å­—å…¸
page.post(url, json={'abc': '123'})
```

å…·ä½“ä½¿ç”¨å“ªç§ï¼ŒæŒ‰æœåŠ¡å™¨è¦æ±‚è€Œå®šã€‚

## âœ…ï¸ å…¶å®ƒè¯·æ±‚æ–¹å¼

æœ¬åº“åªé’ˆå¯¹å¸¸ç”¨çš„ GET å’Œ POST æ–¹å¼ä½œäº†ä¼˜åŒ–ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡æå–é¡µé¢å¯¹è±¡å†…çš„ Session å¯¹è±¡ä»¥åŸç”Ÿ `requests` ä»£ç æ–¹å¼æ‰§è¡Œå…¶å®ƒè¯·æ±‚æ–¹å¼ã€‚

```python
from DrissionPage import SessionPage

page = SessionPage()
# è·å–å†…ç½®çš„ Session å¯¹è±¡
session = page.session
# ä»¥ head æ–¹å¼å‘é€è¯·æ±‚
response = session.head('https://www.baidu.com')
print(response.headers)
```

è¾“å‡ºï¼š

```
{'Accept-Ranges': 'bytes', 'Cache-Control': 'private, no-cache, no-store, proxy-revalidate, no-transform', 'Connection': 'keep-alive', 'Content-Length': '277', 'Content-Type': 'text/html', 'Date': 'Tue, 04 Jan 2022 06:49:18 GMT', 'Etag': '"575e1f72-115"', 'Last-Modified': 'Mon, 13 Jun 2016 02:50:26 GMT', 'Pragma': 'no-cache', 'Server': 'bfe/1.0.8.18'}
```